<div id="container">
    <h2 class="private">Welcome to the private area</h2>
</div>

<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.1.0/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.1.0/mapbox-gl.css' rel='stylesheet' />

<div>
  
  <div id='map'style='width: 100vw; height: 100vh;  margin:auto ;'></div>




{{!-- </div>
<p>
  <a class="btn btn-primary" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
    Link with href
  </a>
  <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
    Button with data-target
  </button>
</p>
<div class="collapse" id="collapseExample">
  <div class="card card-body">
    Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident.
  </div>
</div> --}}



<div class="edupoints">
  <button class="btn btn-danger" onclick="$('.edupoints').toggleClass('active');">
    &#9776;
  </button>
  
  <form action="/map" method="POST" id="add-place" >
    <input type="text" id="geoholder" name="locations"
    <label for="name">Name:</label>
    <input type="text" name="name">
 
    <div id="geocoder" class="geocoder"></div>

    <label for="event">Event:</label>
    <input type="text" name="event">

    <label for="information">General Information:</label>
    <input type="text" name="information">

    <label for="date">Date:</label>
    <input type="date" name="date">

    <label for="time">Time:</label>
    <input type="time" name="time">


  

   
     <div class="redbutton">
    <button  class="btn btn-success" type="submit" method="get"> Add Edu.Point</button>
    </div>
  </form>
   
</div> 

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoidHViYS1rYXNhcCIsImEiOiJjanh1ZTI0YXcwMDM4M2dtbnZ6eXJuOGs2In0.L_TRnX4VuwoBAP4cSCFCVQ';
var map = new mapboxgl.Map ({
container: 'map',
style: "mapbox://styles/tuba-kasap/cjxulodz50esc1cle1zrefz12",
center: [13.375739, 52.509352],
  zoom: 14.5,
  pitch: 47.5
});

axios.get("http://localhost:7200/api/locations").then(response=>{
   response.data.forEach(place=>{
       let popup = new mapboxgl.Popup({ offset: 0, className: 'my-class' })
        .setHTML(`<div class="popup">${place.name}</div>`)
        .setMaxWidth("none")



       var marker = new mapboxgl.Marker()
  .setLngLat(place.location.coordinates)
  .setPopup(popup)
  .addTo(map);
   })
})

var geocoder = new MapboxGeocoder({
    accessToken: mapboxgl.accessToken,
    mapboxgl: mapboxgl
  });

  var geolocate = new mapboxgl.GeolocateControl({
        positionOptions: {
          enableHighAccuracy: true
        },
        trackUserLocation: true
      });

      map.addControl(geolocate);

map.addControl(new MapboxDirections({
accessToken: mapboxgl.accessToken
}), 'top-left');


  document.getElementById('geocoder').appendChild(geocoder.onAdd(map));
  document.querySelector("#add-place").addEventListener("submit", () => {
    document.querySelector("#geoholder").value = document.querySelector(".mapboxgl-ctrl-geocoder--input").value
  })
</script>


 


